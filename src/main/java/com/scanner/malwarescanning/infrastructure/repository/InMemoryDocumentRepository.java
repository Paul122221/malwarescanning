package com.scanner.malwarescanning.infrastructure.repository;

import com.scanner.malwarescanning.domain.entity.Document;
import com.scanner.malwarescanning.domain.repository.DocumentRepository;

import java.util.List;

public class InMemoryDocumentRepository implements DocumentRepository {
    private final List<Document> documents;

    public InMemoryDocumentRepository(List<Document> documents) {
        this.documents = documents;
    }

    public void save(Document document){
        documents.add(document);
    }

    public List<Document> findAll(){
        return documents;
    }

    public Document findById(String id){
        return documents.stream().filter(e ->
                e.getId().hashCode() == id.hashCode() && e.getId().equals(id)
        ).findFirst().orElseThrow();
    }

    public void deleteAll(){
        documents.clear();
    }

    @Override
    public void delete(Document document) {
        documents.remove(document);
    }
}
